# 一、参考

从零开始学架构： B站同名课程

高可用可伸缩微服务架构，基于Dubbo、spring cloud和service mesh

# 二、架构概念

## 相关概念

### 模式(架构)

- 架构模式：描述系统基础架构、子系统划分、确定职责和边界，及相互作用，单体架构、SOA、微服务架构
- 设计模式：具体场景下问题的处理方法，23种设计模式
- 实现模式：具体问题处理方法，如编码规范、命名规则

### 框架

​	基于一组类和工具，在特性领域的开放性应用框架，如MVC,SSH

### 模块

   业务系统按照功能划分，如用户模块、商品模块、订单模块

### 组件

​	可复用的业务功能的组合，比如日志组件，权限组件

## 架构目标

###    分而治之

   系统拆分后，每个模块或组件粒度标准应满足：高内聚、低耦合

### DFX需求

​	高性能（并发用户数、TPS、吞吐量、延迟）、可靠性、稳定性、可用性、安全性、可维护性、可扩展性



# 三、分层架构

## 3.1 为什么要分层

​	1、分而治之

​	2、各司其职

​	3、有条不紊的结合

## 3.2 常见分层设计

OSI七层模型、MVC、基于领域模型的分层

## 3.3 分层模型演进过程

#### Servlet JSP

![image-20220406232539026](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220406232539026.png)

#### MVC分层

![image-20220406232638901](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220406232638901.png)

##### SSH

![image-20220406232710278](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220406232710278.png)

- Struts解决接入及表示层：每个请求对应一个action

- Spring解决业务服务、事务处理、会话管理等问题

- Hibiernate解决数据存储接入问题

##### SSM

![image-20220406235329744](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220406235329744.png)

- SpringMVC：解决接入和表示层
- spring解决业务服务、事务处理、会话管理等问题
- Mybatis解决数据接入层

##### SpringBoot

![image-20220406235621694](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220406235621694.png)

- 整合了所有Spring框架功能
- 提供了简单的配置及注解的接入方式
- 提供All in one的服务

#### 分布式分层（微服务）

![image-20220406235856707](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220406235856707.png)

## 3.4 亿级流量平台分层架构

![image-20220407000651564](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220407000651564.png)

**详细展开**

###  web概念层

![image-20220407000035440](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220407000035440.png)

### 业务概念层

![image-20220407000301893](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220407000301893.png)

任务调度：Quartz（单体）、Elastic Job（分布式）

### 数据访问及存储层

![image-20220407000445167](C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220407000445167.png)

MyCat：分库分表    ES: 查询   Redis Proxy集群代理



# 访问层架构



https://www.bilibili.com/video/BV1kp4y1x7Ad?p=5&spm_id_from=pageDriver

# API网关层架构



# 核心服务层架构

# 数据存储及接入层

# 监控、限流、降级